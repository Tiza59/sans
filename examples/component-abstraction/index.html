<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sans UI Component Abstraction Example</title>
  <link rel="stylesheet" href="./styles.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    h1, h2 {
      color: #333;
    }
    
    .demo-section {
      margin: 20px 0;
      padding: 20px;
      border: 1px solid #eee;
      border-radius: 8px;
    }
    
    .component-row {
      display: flex;
      gap: 10px;
      margin: 10px 0;
      flex-wrap: wrap;
      align-items: center;
    }
    
    pre {
      background-color: #f5f5f5;
      padding: 10px;
      border-radius: 4px;
      overflow: auto;
    }
    
    code {
      font-family: 'Courier New', Courier, monospace;
    }
    
    #output {
      margin-top: 20px;
      padding: 10px;
      background-color: #f0f0f0;
      border-radius: 4px;
      min-height: 100px;
    }
  </style>
</head>
<body>
  <h1>Sans UI Component Abstraction Example</h1>
  <p>This example demonstrates how to use the Sans UI component abstraction layer to create and manage components.</p>
  
  <div class="demo-section">
    <h2>Button Components</h2>
    <div class="component-row" id="button-container"></div>
    
    <pre><code>// Create a primary button with the ComponentFactory
const primaryButton = ComponentFactory.createButton({
  type: 'primary',
  size: 'medium'
});

// Set the button text
primaryButton.getElement().textContent = 'Primary Button';

// Add a click event handler
primaryButton.on('click', (event, component) => {
  logOutput('Primary button clicked!');
});

// Create the button in the DOM
primaryButton.create(document.getElementById('button-container'));</code></pre>
  </div>
  
  <div class="demo-section">
    <h2>Dynamic Property Changes</h2>
    <div class="component-row">
      <div id="dynamic-button-container"></div>
      <div>
        <label>
          <input type="checkbox" id="disable-toggle"> Disable Button
        </label>
        <select id="type-selector">
          <option value="default">Default</option>
          <option value="primary">Primary</option>
          <option value="secondary">Secondary</option>
          <option value="danger">Danger</option>
        </select>
        <select id="size-selector">
          <option value="small">Small</option>
          <option value="medium">Medium</option>
          <option value="large">Large</option>
        </select>
      </div>
    </div>
  </div>
  
  <div class="demo-section">
    <h2>Event Handling</h2>
    <div class="component-row" id="event-container"></div>
  </div>
  
  <div class="demo-section">
    <h2>Output</h2>
    <div id="output"></div>
  </div>
  
  <!-- Import the component abstraction layer -->
  <script type="module">
    import ComponentFactory, { ComponentAdapter } from './components.js';
    
    // Make ComponentFactory available globally for this demo
    window.ComponentFactory = ComponentFactory;
    
    // Wait for the DOM to be ready
    document.addEventListener('DOMContentLoaded', () => {
      // Example 1: Button Components
      const primaryButton = ComponentFactory.createButton({
        type: 'primary',
        size: 'medium'
      });
      primaryButton.getElement().textContent = 'Primary Button';
      primaryButton.on('click', (event, component) => {
        logOutput('Primary button clicked!');
      });
      primaryButton.create(document.getElementById('button-container'));
      
      const secondaryButton = ComponentFactory.createButton({
        type: 'secondary',
        size: 'medium'
      });
      secondaryButton.getElement().textContent = 'Secondary Button';
      secondaryButton.on('click', (event, component) => {
        logOutput('Secondary button clicked!');
      });
      secondaryButton.create(document.getElementById('button-container'));
      
      const dangerButton = ComponentFactory.createButton({
        type: 'danger',
        size: 'medium'
      });
      dangerButton.getElement().textContent = 'Danger Button';
      dangerButton.on('click', (event, component) => {
        logOutput('Danger button clicked!');
      });
      dangerButton.create(document.getElementById('button-container'));
      
      // Example 2: Dynamic Property Changes
      const dynamicButton = ComponentFactory.createButton({
        type: 'default',
        size: 'medium'
      });
      dynamicButton.getElement().textContent = 'Dynamic Button';
      dynamicButton.create(document.getElementById('dynamic-button-container'));
      
      // Handle disable toggle
      const disableToggle = document.getElementById('disable-toggle');
      disableToggle.addEventListener('change', (e) => {
        dynamicButton.setProperty('disabled', e.target.checked);
        logOutput(`Button ${e.target.checked ? 'disabled' : 'enabled'}`);
      });
      
      // Handle type selector
      const typeSelector = document.getElementById('type-selector');
      typeSelector.addEventListener('change', (e) => {
        dynamicButton.setProperty('type', e.target.value);
        logOutput(`Button type changed to: ${e.target.value}`);
      });
      
      // Handle size selector
      const sizeSelector = document.getElementById('size-selector');
      sizeSelector.addEventListener('change', (e) => {
        dynamicButton.setProperty('size', e.target.value);
        logOutput(`Button size changed to: ${e.target.value}`);
      });
      
      // Example 3: Event Handling
      const clickCounter = ComponentFactory.createButton({
        type: 'primary',
        size: 'medium'
      });
      
      let clickCount = 0;
      clickCounter.getElement().textContent = 'Click Count: 0';
      
      // Add click handler
      const clickHandler = (event, component) => {
        clickCount++;
        component.getElement().textContent = `Click Count: ${clickCount}`;
        logOutput(`Button clicked ${clickCount} times`);
        
        // Remove the handler after 5 clicks
        if (clickCount >= 5) {
          component.off('click', clickHandler);
          logOutput('Click handler removed after 5 clicks');
          component.getElement().textContent = 'Handler Removed';
          component.setProperty('type', 'secondary');
        }
      };
      
      clickCounter.on('click', clickHandler);
      clickCounter.create(document.getElementById('event-container'));
    });
    
    // Helper function to log output
    function logOutput(message) {
      const output = document.getElementById('output');
      const timestamp = new Date().toLocaleTimeString();
      output.innerHTML += `<div>[${timestamp}] ${message}</div>`;
      // Scroll to bottom
      output.scrollTop = output.scrollHeight;
    }
    
    window.logOutput = logOutput;
  </script>
</body>
</html>
